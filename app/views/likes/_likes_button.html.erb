<% like = current_user.likes.where(likeable_type: likeable.class.to_s, likeable_id: likeable.id).first %>
<% unless likeable.author_id == current_user.id %>
        <% if like %> 
                <%#= render 'likes/delete_form', likeable: likeable, like: like %>
                <%= button_to user_like_path(current_user.id,like.id), method: :delete, remote: true, class: "btn btn-white btn-xs" do %>
                        <%= likeable.likes.count %> <i class="fa fa-thumbs-up"></i> Unlike
                <% end %>
        <% else %>
                <%#= render 'likes/create_form', likeable: likeable %>
                <%= button_to polymorphic_path([current_user, likeable, Like.new]), remote: true, class: "btn btn-white btn-xs" do %>
                        <%= likeable.likes.count %> <i class="fa fa-thumbs-up"></i> Like
                <% end %>   
        <% end %>
<% else %>
        <%= button_to '#', remote: true, class: "btn btn-white btn-xs" do %>
                <%= likeable.likes.count %> <i class="fa fa-thumbs-up"></i> Likes
        <% end %>
<% end %>

